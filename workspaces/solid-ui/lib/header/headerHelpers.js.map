{"version":3,"sources":["../../src/header/headerHelpers.ts"],"names":["getStyle","styleClass","styleMap","addStyleClassToElement","element","styleClasses","forEach","style","document","head","classes","classList","add","getPod","location","origin","site","throttle","func","wait","options","context","args","result","timeout","previous","later","leading","Date","now","apply","remaining","arguments","clearTimeout","trailing","setTimeout"],"mappings":";;;;;;;;;;;;;AAGA;;AACA;;AACA;;AALA;AACA;AACA;;AAUA;AACA;AACA;AACA,SAASA,QAAT,CAAmBC,UAAnB,EAA+B;AAC7B,SAAOC,mBAASD,UAAT,CAAP;AACD;AAED;AACA;AACA;;;AACO,SAASE,sBAAT,CAAiCC,OAAjC,EAA+CC,YAA/C,EAAuE;AAC5EA,EAAAA,YAAY,CAACC,OAAb,CAAqB,UAACL,UAAD,EAAgB;AACnC,QAAMM,KAAK,GAAGP,QAAQ,CAACC,UAAD,CAAtB;;AADmC,sBAEf,qBAAWO,QAAQ,CAACC,IAApB,uCAA6BR,UAA7B,EAA0CM,KAA1C,EAFe;AAAA,QAE3BG,OAF2B,eAE3BA,OAF2B;;AAGnCN,IAAAA,OAAO,CAACO,SAAR,CAAkBC,GAAlB,CAAsBF,OAAO,CAACT,UAAD,CAA7B;AACD,GAJD;AAKD;AACD;AACA;AACA;;;AACO,SAASY,MAAT,GAA8B;AACnC;AACA,SAAO,iBAAIL,QAAQ,CAACM,QAAT,CAAkBC,MAAtB,EAA8BC,IAA9B,EAAP;AACD;AACD;AACA;AACA;;;AACO,SAASC,QAAT,CAAmBC,IAAnB,EAAmCC,IAAnC,EAAyG;AAAA,MAAxDC,OAAwD,uEAA7B,EAA6B;AAC9G,MAAIC,OAAJ,EACEC,IADF,EAEEC,MAFF;AAGA,MAAIC,OAAY,GAAG,IAAnB;AACA,MAAIC,QAAQ,GAAG,CAAf;;AACA,MAAMC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACxBD,IAAAA,QAAQ,GAAG,CAACL,OAAO,CAACO,OAAT,GAAmB,CAAnB,GAAuBC,IAAI,CAACC,GAAL,EAAlC;AACAL,IAAAA,OAAO,GAAG,IAAV;AACAD,IAAAA,MAAM,GAAGL,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB,CAAT;AACA,QAAI,CAACE,OAAL,EAAcH,OAAO,GAAGC,IAAI,GAAG,IAAjB;AACf,GALD;;AAMA,SAAO,YAAY;AACjB,QAAMO,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;AACA,QAAI,CAACJ,QAAD,IAAa,CAACL,OAAO,CAACO,OAA1B,EAAmCF,QAAQ,GAAGI,GAAX;AACnC,QAAME,SAAS,GAAGZ,IAAI,IAAIU,GAAG,GAAGJ,QAAV,CAAtB,CAHiB,CAIjB;;AACAJ,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,IAAI,GAAGU,SAAP;;AACA,QAAID,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAGZ,IAAlC,EAAwC;AACtC,UAAIK,OAAJ,EAAa;AACXS,QAAAA,YAAY,CAACT,OAAD,CAAZ;AACAA,QAAAA,OAAO,GAAG,IAAV;AACD;;AACDC,MAAAA,QAAQ,GAAGI,GAAX;AACAN,MAAAA,MAAM,GAAGL,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB,CAAT;AACA,UAAI,CAACE,OAAL,EAAcH,OAAO,GAAGC,IAAI,GAAG,IAAjB;AACf,KARD,MAQO,IAAI,CAACE,OAAD,IAAYJ,OAAO,CAACc,QAAR,KAAqB,KAArC,EAA4C;AACjDV,MAAAA,OAAO,GAAGW,UAAU,CAACT,KAAD,EAAQK,SAAR,CAApB;AACD;;AACD,WAAOR,MAAP;AACD,GAnBD;AAoBD","sourcesContent":["/*\n    Copied from mashlib/src/global/metadata.ts\n */\nimport { NamedNode, sym } from 'rdflib'\nimport { styleMap } from './styleMap'\nimport { getClasses } from '../jss'\n\ntype ThrottleOptions = {\n    leading?: boolean;\n    throttling?: boolean;\n    trailing?: boolean;\n}\n/**\n * @internal\n */\nfunction getStyle (styleClass) {\n  return styleMap[styleClass]\n}\n\n/**\n * @ignore exporting this only for the unit test\n */\nexport function addStyleClassToElement (element: any, styleClasses: string[]) {\n  styleClasses.forEach((styleClass) => {\n    const style = getStyle(styleClass)\n    const { classes } = getClasses(document.head, { [styleClass]: style })\n    element.classList.add(classes[styleClass])\n  })\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function getPod (): NamedNode {\n  // @@ TODO: This is given that mashlib runs on NSS - might need to change when we want it to run on other Pod servers\n  return sym(document.location.origin).site()\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function throttle (func: Function, wait: number, options: ThrottleOptions = {}): (...args: any[]) => any {\n  let context: any,\n    args: any,\n    result: any\n  let timeout: any = null\n  let previous = 0\n  const later = function () {\n    previous = !options.leading ? 0 : Date.now()\n    timeout = null\n    result = func.apply(context, args)\n    if (!timeout) context = args = null\n  }\n  return function () {\n    const now = Date.now()\n    if (!previous && !options.leading) previous = now\n    const remaining = wait - (now - previous)\n    // @ts-ignore\n    context = this\n    args = arguments\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout)\n        timeout = null\n      }\n      previous = now\n      result = func.apply(context, args)\n      if (!timeout) context = args = null\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining)\n    }\n    return result\n  }\n}\n"],"file":"headerHelpers.js"}