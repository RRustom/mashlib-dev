{"version":3,"sources":["../src/imagePane.js"],"names":["UI","require","module","exports","icon","icons","originalIconBase","name","label","subject","context","kb","session","store","anyStatementMatching","ns","rdf","sym","contentTypeMatch","x","contentTypes","cts","fetcher","getHeader","j","length","k","indexOf","suppressed","render","myDocument","dom","div","createElement","setAttribute","img","uri","tr","appendChild"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,IAAMA,EAAE,GAAGC,OAAO,CAAC,UAAD,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,IAAI,EAAEJ,EAAE,CAACK,KAAH,CAASC,gBAAT,GAA4B,8BADnB;AAGfC,EAAAA,IAAI,EAAE,OAHS;AAKfC,EAAAA,KAAK,EAAE,eAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACjC,QAAMC,EAAE,GAAGD,OAAO,CAACE,OAAR,CAAgBC,KAA3B;;AACA,QACE,CAACF,EAAE,CAACG,oBAAH,CACCL,OADD,EAECT,EAAE,CAACe,EAAH,CAAMC,GAAN,CAAU,MAAV,CAFD,EAGCL,EAAE,CAACM,GAAH,CAAO,gCAAP,CAHD,CADH,EAME;AACA;AACA,aAAO,IAAP;AACD,KAXgC,CAajC;;;AAEA,QAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUP,EAAV,EAAcQ,CAAd,EAAiBC,YAAjB,EAA+B;AACtD,UAAMC,GAAG,GAAGV,EAAE,CAACW,OAAH,CAAWC,SAAX,CAAqBJ,CAArB,EAAwB,cAAxB,CAAZ;;AACA,UAAIE,GAAJ,EAAS;AACP,aAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnC,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,YAAY,CAACK,MAAjC,EAAyCC,CAAC,EAA1C,EAA8C;AAC5C,gBAAIL,GAAG,CAACG,CAAD,CAAH,CAAOG,OAAP,CAAeP,YAAY,CAACM,CAAD,CAA3B,KAAmC,CAAvC,EAA0C;AACxC,qBAAO,IAAP;AACD;AACF;AACF;AACF;;AACD,aAAO,KAAP;AACD,KAZD;;AAcA,QAAME,UAAU,GAAG,CAAC,iBAAD,CAAnB;;AACA,QAAIV,gBAAgB,CAACP,EAAD,EAAKF,OAAL,EAAcmB,UAAd,CAApB,EAA+C;AAC7C,aAAO,IAAP;AACD;;AACD,WAAO,MAAP;AACD,GAvCc;AAyCfC,EAAAA,MAAM,EAAE,gBAAUpB,OAAV,EAAmBC,OAAnB,EAA4B;AAClC,QAAMoB,UAAU,GAAGpB,OAAO,CAACqB,GAA3B;AACA,QAAMC,GAAG,GAAGF,UAAU,CAACG,aAAX,CAAyB,KAAzB,CAAZ;AACAD,IAAAA,GAAG,CAACE,YAAJ,CAAiB,OAAjB,EAA0B,WAA1B;AACA,QAAMC,GAAG,GAAGL,UAAU,CAACG,aAAX,CAAyB,KAAzB,CAAZ;AACAE,IAAAA,GAAG,CAACD,YAAJ,CAAiB,KAAjB,EAAwBzB,OAAO,CAAC2B,GAAhC,EALkC,CAKG;;AACrCD,IAAAA,GAAG,CAACD,YAAJ,CAAiB,OAAjB,EAA0B,oCAA1B,EANkC,CAOlC;AACA;;AACA,QAAMG,EAAE,GAAGP,UAAU,CAACG,aAAX,CAAyB,IAAzB,CAAX,CATkC,CASQ;;AAC1CI,IAAAA,EAAE,CAACC,WAAH,CAAeH,GAAf;AACAH,IAAAA,GAAG,CAACM,WAAJ,CAAgBD,EAAhB;AACA,WAAOL,GAAP;AACD;AAtDc,CAAjB,C,CAyDA","sourcesContent":["/*   Image Pane\n **\n **  This outline pane contains the document contents for an Image document\n */\nconst UI = require('solid-ui')\n\nmodule.exports = {\n  icon: UI.icons.originalIconBase + 'tango/22-image-x-generic.png',\n\n  name: 'image',\n\n  label: function (subject, context) {\n    const kb = context.session.store\n    if (\n      !kb.anyStatementMatching(\n        subject,\n        UI.ns.rdf('type'),\n        kb.sym('http://purl.org/dc/terms/Image')\n      )\n    ) {\n      // NB: Not dc: namespace!\n      return null\n    }\n\n    //   See also the source pane, which has lower precedence.\n\n    const contentTypeMatch = function (kb, x, contentTypes) {\n      const cts = kb.fetcher.getHeader(x, 'content-type')\n      if (cts) {\n        for (let j = 0; j < cts.length; j++) {\n          for (let k = 0; k < contentTypes.length; k++) {\n            if (cts[j].indexOf(contentTypes[k]) >= 0) {\n              return true\n            }\n          }\n        }\n      }\n      return false\n    }\n\n    const suppressed = ['application/pdf']\n    if (contentTypeMatch(kb, subject, suppressed)) {\n      return null\n    }\n    return 'view'\n  },\n\n  render: function (subject, context) {\n    const myDocument = context.dom\n    const div = myDocument.createElement('div')\n    div.setAttribute('class', 'imageView')\n    const img = myDocument.createElement('IMG')\n    img.setAttribute('src', subject.uri) // w640 h480\n    img.setAttribute('style', 'max-width: 100%; max-height: 100%;')\n    //        div.style['max-width'] = '640'\n    //        div.style['max-height'] = '480'\n    const tr = myDocument.createElement('TR') // why need tr?\n    tr.appendChild(img)\n    div.appendChild(tr)\n    return div\n  }\n}\n\n// ends\n"],"file":"imagePane.js"}