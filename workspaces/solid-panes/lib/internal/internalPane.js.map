{"version":3,"sources":["../../src/internal/internalPane.ts"],"names":["pane","icon","icons","originalIconBase","name","audience","ns","solid","label","render","subject","context","dom","store","session","canonizedSubject","canon","types","findTypeURIs","filter","pred","view","paneRegistry","byName","predicates","uri","div","createElement","setAttribute","deleteRecursive","kb","folder","fetcher","console","error","Promise","resolve","reject","load","then","promises","each","ldp","map","file","holds","rdf","log","webOperation","all","undefined","err","str","Error","alert","isDocument","includes","controls","appendChild","style","width","margin","controlRow","deleteCell","isFolder","endsWith","noun","isProtectedUri","deleteButton","widgets","deleteButtonWithCheck","confirm","promise","refreshCell","refreshButton","button","iconBase","addEventListener","refresh","ok","errm","plist","statementsMatching","docURI","push","appNode","indexOf","split","updater","ed","editable","toString","outliner","getOutliner","appendPropertyTRs","classes","siteUri","site"],"mappings":"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","sourcesContent":["/*   Internal Pane\n **\n **  This outline pane contains the properties which are\n ** internal to the user's interaction with the web, and are not normally displayed\n */\n/* global alert confirm */\n\nimport { icons, ns, widgets } from 'solid-ui'\nimport { BlankNode, IndexedFormula, literal, NamedNode, st, sym, Variable, Store } from 'rdflib'\nimport { PaneDefinition } from 'pane-registry'\n\nconst pane: PaneDefinition = {\n  icon: icons.originalIconBase + 'tango/22-emblem-system.png',\n\n  name: 'internal',\n\n  audience: [ns.solid('Developer')],\n\n  label: function () {\n    return 'under the hood' // There is often a URI even of no statements\n  },\n\n  render: function (subject, context) {\n    const dom = context.dom\n    const store = context.session.store as Store\n    const canonizedSubject = store.canon(subject) as BlankNode | NamedNode | Variable\n    const types = store.findTypeURIs(canonizedSubject)\n\n    function filter (pred: NamedNode) {\n      if (types['http://www.w3.org/2007/ont/link#ProtocolEvent']) return true // display everything for them\n      const view = context.session.paneRegistry.byName('internal')\n      return (\n        view &&\n        view.predicates &&\n        !!(typeof view.predicates[pred.uri] !== 'undefined')\n      )\n    }\n\n    const div = dom.createElement('div')\n    div.setAttribute('class', 'internalPane')\n    div.setAttribute(\n      'style',\n      'background-color: #ddddff; padding: 0.5em; border-radius: 1em;'\n    )\n\n    function deleteRecursive (kb: IndexedFormula, folder: NamedNode) {\n      const fetcher = (kb as any).fetcher\n      if (!fetcher) {\n        console.error('No fetcher available')\n        return\n      }\n      return new Promise(function (resolve, reject) {\n        fetcher.load(folder).then(function () {\n          const promises = kb.each(folder, ns.ldp('contains')).map(file => {\n            if (kb.holds(file, ns.rdf('type'), ns.ldp('BasicContainer'))) {\n              return deleteRecursive(kb, file as NamedNode)\n            } else {\n              console.log('deleteRecursive leaf file: ' + file)\n              return fetcher.webOperation('DELETE', (file as NamedNode).uri)\n            }\n          })\n          Promise.all(promises).then(\n            () => {\n              console.log('deleteRecursive empty folder: ' + folder)\n              fetcher\n                .webOperation('DELETE', folder.uri)\n                .then(() => {\n                  console.log('Deleted Ok: ' + folder)\n                  resolve(undefined)\n                })\n                .catch((err: string) => {\n                  const str = 'Unable to delete ' + folder + ': ' + err\n                  console.log(str)\n                  reject(new Error(str))\n                })\n              resolve(undefined)\n            },\n            err => {\n              alert(err)\n              reject(err)\n            }\n          )\n        })\n      })\n    }\n\n    const isDocument = subject.uri && !subject.uri.includes('#')\n    if (isDocument) {\n      const controls = div.appendChild(dom.createElement('table'))\n      controls.style.width = '100%'\n      controls.style.margin = '1em'\n      const controlRow = controls.appendChild(dom.createElement('tr'))\n\n      const deleteCell = controlRow.appendChild(dom.createElement('td'))\n      const isFolder =\n        (subject.uri && subject.uri.endsWith('/')) ||\n        store.holds(subject, ns.rdf('type'), ns.ldp('Container'))\n      const noun = isFolder ? 'folder' : 'file'\n      if (!isProtectedUri(subject)) {\n        console.log(subject)\n        const deleteButton = widgets.deleteButtonWithCheck(\n          dom,\n          deleteCell,\n          noun,\n          function () {\n            if (\n              !confirm(\n                `Are you sure you want to delete ${subject}? This cannot be undone.`\n              )\n            ) {\n              return\n            }\n            // @@ TODO Remove casing of store.fetcher\n            if (!store.fetcher) {\n              throw new Error('Store has no fetcher')\n            }\n            const promise = isFolder\n              ? (deleteRecursive(store, subject) || Promise.resolve())\n              : store.fetcher.webOperation('DELETE', subject.uri) || Promise.resolve()\n            promise\n              .then(() => {\n                const str = 'Deleted: ' + subject\n                console.log(str)\n              })\n              .catch((err: any) => {\n                const str = 'Unable to delete ' + subject + ': ' + err\n                console.log(str)\n                alert(str)\n              })\n          }\n        )\n        deleteButton.style = 'height: 2em;'\n        deleteButton.class = '' // Remove hover hide\n        deleteCell.appendChild(deleteButton)\n      }\n\n      const refreshCell = controlRow.appendChild(dom.createElement('td'))\n      const refreshButton = widgets.button(\n        dom,\n        icons.iconBase + 'noun_479395.svg',\n        'refresh'\n      )\n      refreshCell.appendChild(refreshButton)\n      refreshButton.addEventListener('click', () => {\n        if (!store.fetcher) {\n          throw new Error('Store has no fetcher')\n        }\n        store.fetcher.refresh(subject, function (\n          ok,\n          errm\n        ) {\n          let str\n          if (ok) {\n            str = 'Refreshed OK: ' + subject\n          } else {\n            str = 'Error refreshing: ' + subject + ': ' + errm\n          }\n          console.log(str)\n          alert(str)\n        })\n      })\n    }\n\n    let plist = store.statementsMatching(subject)\n    let docURI = ''\n    if (!store.fetcher) {\n      throw new Error('Store has no fetcher')\n    }\n\n    if (subject.uri) {\n      plist.push(\n        st(\n          subject,\n          sym('http://www.w3.org/2007/ont/link#uri'),\n          subject.uri as any, // @@ TODO Remove casting\n          store.fetcher.appNode\n        )\n      )\n      if (subject.uri.indexOf('#') >= 0) {\n        docURI = subject.uri.split('#')[0]\n        plist.push(\n          st(\n            subject,\n            sym('http://www.w3.org/2007/ont/link#documentURI'),\n            subject.uri.split('#')[0] as any, // @@ TODO Remove casting\n            store.fetcher.appNode\n          )\n        )\n        plist.push(\n          st(\n            subject,\n            sym('http://www.w3.org/2007/ont/link#document'),\n            sym(subject.uri.split('#')[0]),\n            store.fetcher.appNode\n          )\n        )\n      } else {\n        docURI = subject.uri\n      }\n    }\n    if (docURI) {\n      if (!store.updater) {\n        throw new Error('Store has no updater')\n      }\n\n      const ed = store.updater.editable(docURI)\n      if (ed) {\n        plist.push(\n          st(\n            subject,\n            sym('http://www.w3.org/ns/rww#editable'),\n            literal(ed.toString()),\n            store.fetcher.appNode\n          )\n        )\n      }\n    }\n    // @@ TODO get a proper type\n    const outliner: any = context.getOutliner(dom)\n    outliner.appendPropertyTRs(div, plist, false, filter)\n    plist = store.statementsMatching(undefined, undefined, subject)\n    outliner.appendPropertyTRs(div, plist, true, filter)\n    return div\n  },\n\n  predicates: {\n    // Predicates used for inner workings. Under the hood\n    'http://www.w3.org/2007/ont/link#request': 1,\n    'http://www.w3.org/2007/ont/link#requestedBy': 1,\n    'http://www.w3.org/2007/ont/link#source': 1,\n    'http://www.w3.org/2007/ont/link#session': 2, // 2=  test neg but display\n    'http://www.w3.org/2007/ont/link#uri': 1,\n    'http://www.w3.org/2007/ont/link#documentURI': 1,\n    'http://www.w3.org/2007/ont/link#document': 1,\n    'http://www.w3.org/2007/ont/link#all': 1, // From userinput.js\n    'http://www.w3.org/2007/ont/link#Document': 1,\n    'http://www.w3.org/ns/rww#editable': 1,\n    'http://www.w3.org/2000/01/rdf-schema#seeAlso': 1,\n    'http://www.w3.org/2002/07/owl#': 1\n  },\n\n  classes: {\n    // Things which are inherently already undercover\n    'http://www.w3.org/2007/ont/link#ProtocolEvent': 1\n  }\n}\n\nfunction isProtectedUri (subject: NamedNode): boolean {\n  // TODO: Could make the code below smarter by removing some of the redundancy by creating a recursive function, but did not bother now\n  const siteUri = subject.site().uri\n  return (\n    subject.uri === siteUri ||\n    subject.uri === siteUri + 'profile/' ||\n    subject.uri === siteUri + 'profile/card' ||\n    subject.uri === siteUri + 'settings/' ||\n    subject.uri === siteUri + 'settings/prefs.ttl' ||\n    subject.uri === siteUri + 'settings/privateTypeIndex.ttl' ||\n    subject.uri === siteUri + 'settings/publicTypeIndex.ttl' ||\n    subject.uri === siteUri + 'settings/serverSide.ttl'\n  )\n}\n\nexport default pane\n\n// ends\n"],"file":"internalPane.js"}