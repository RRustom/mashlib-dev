{"version":3,"sources":["../../src/trustedApplications/trustedApplications.view.ts"],"names":["thisColor","trustedApplicationView","global","icon","icons","iconBase","name","label","render","subject","context","dom","div","createElement","classList","add","setAttribute","table","appendChild","main","bottom","statusArea","err","widgets","errorMessageBlock","authn","logInLoadProfile","me","authContext","profile","doc","store","updater","Error","editable","uri","applicationsTable"],"mappings":"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","sourcesContent":["import { authn, icons, store, widgets } from 'solid-ui'\nimport { NamedNode } from 'rdflib'\n\nimport { PaneDefinition } from 'pane-registry'\nimport { createApplicationTable, createContainer, createText } from './trustedApplications.dom'\n\nconst thisColor = '#418d99'\n\nconst trustedApplicationView: PaneDefinition = {\n  global: true,\n  icon: `${icons.iconBase}noun_15177.svg`,\n  name: 'trustedApplications',\n  label: () => null,\n  render: (subject, context) => {\n    const dom = context.dom\n    const div = dom.createElement('div')\n    div.classList.add('trusted-applications-pane')\n    div.setAttribute(\n      'style',\n      'border: 0.3em solid ' +\n      thisColor +\n      '; border-radius: 0.5em; padding: 0.7em; margin-top:0.7em;'\n    )\n    const table = div.appendChild(dom.createElement('table'))\n    const main = table.appendChild(dom.createElement('tr'))\n    const bottom = table.appendChild(dom.createElement('tr'))\n    const statusArea = bottom.appendChild(dom.createElement('div'))\n    statusArea.setAttribute('style', 'padding: 0.7em;')\n    render(dom, main, statusArea).catch(err => statusArea.appendChild(widgets.errorMessageBlock(dom, err)))\n    return div\n  }\n}\n\nasync function render (dom, main, statusArea): Promise<void> {\n  const authContext = await authn.logInLoadProfile({ dom: dom, div: main, statusArea: statusArea, me: null })\n  const subject = authContext.me as NamedNode\n\n  const profile = subject.doc()\n  if (!store.updater) {\n    throw new Error('Store has no updater')\n  }\n  const editable = store.updater.editable(profile.uri, store)\n\n  main.appendChild(createText('h3', 'Manage your trusted applications'))\n\n  if (!editable) {\n    main.appendChild(\n      widgets.errorMessageBlock(dom, `Your profile ${subject.doc().uri} is not editable, so we cannot do much here.`)\n    )\n    return\n  }\n\n  main.appendChild(createText('p', 'Here you can manage the applications you trust.'))\n\n  const applicationsTable = createApplicationTable(subject)\n  main.appendChild(applicationsTable)\n\n  main.appendChild(createText('h4', 'Notes'))\n  main.appendChild(\n    createContainer('ol', [\n      main.appendChild(\n        createText(\n          'li',\n          'Trusted applications will get access to all resources that you have access to.'\n        )\n      ),\n      main.appendChild(\n        createText('li', 'You can limit which modes they have by default.')\n      ),\n      main.appendChild(\n        createText('li', 'They will not gain more access than you have.')\n      )\n    ])\n  )\n  main.appendChild(\n    createText('p', 'Application URLs must be valid URL. Examples are http://localhost:3000, https://trusted.app, and https://sub.trusted.app.')\n  )\n}\n\nexport default trustedApplicationView\n"],"file":"trustedApplications.view.js"}