{"version":3,"sources":["../src/defaultPane.js"],"names":["UI","require","$rdf","ns","module","exports","icon","icons","originalIconBase","name","audience","solid","label","_subject","render","subject","context","dom","filter","pred","inverse","session","paneRegistry","byName","predicates","uri","outliner","getOutliner","kb","store","log","info","location","canon","div","createElement","setAttribute","plist","statementsMatching","appendPropertyTRs","undefined","termType","value","slice","st","sym","link","updater","editable","rdf","Util","docpart","anyStatementMatching","why","holdingTr","holdingTd","img","src","addEventListener","addNewTripleIconMouseDownListener","e","UserInput","addNewPredicateObject","stopPropagation","preventDefault","className","appendChild"],"mappings":"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","sourcesContent":["/*   Default Pane\n **\n **  This outline pane contains the properties which are\n **  normally displayed to the user. See also: internalPane\n ** This pane hides the ones considered too low-level for the normal user.\n */\n\nconst UI = require('solid-ui')\nconst $rdf = require('rdflib')\nconst ns = UI.ns\n\nmodule.exports = {\n  icon: UI.icons.originalIconBase + 'about.png',\n\n  name: 'default',\n\n  audience: [ns.solid('Developer')],\n\n  label: function (_subject) {\n    return 'about '\n  },\n\n  render: function (subject, context) {\n    const dom = context.dom\n\n    const filter = function (pred, inverse) {\n      if (\n        typeof context.session.paneRegistry.byName('internal').predicates[\n          pred.uri\n        ] !== 'undefined'\n      ) {\n        return false\n      }\n      if (\n        inverse &&\n        pred.uri === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'\n      ) {\n        return false\n      }\n      return true\n    }\n\n    const outliner = context.getOutliner(dom)\n    const kb = context.session.store\n    // var outline = outliner; // @@\n    UI.log.info('@defaultPane.render, dom is now ' + dom.location)\n    subject = kb.canon(subject)\n    const div = dom.createElement('div')\n    div.setAttribute('class', 'defaultPane')\n    //        appendRemoveIcon(div, subject, div)\n\n    let plist = kb.statementsMatching(subject)\n    outliner.appendPropertyTRs(div, plist, false, filter)\n    plist = kb.statementsMatching(undefined, undefined, subject)\n    outliner.appendPropertyTRs(div, plist, true, filter)\n    if (\n      subject.termType === 'Literal' &&\n      subject.value.slice(0, 7) === 'http://'\n    ) {\n      outliner.appendPropertyTRs(\n        div,\n        [$rdf.st(kb.sym(subject.value), UI.ns.link('uri'), subject)],\n        true,\n        filter\n      )\n    }\n    if (\n      (subject.termType === 'NamedNode' &&\n        kb.updater.editable(UI.rdf.Util.uri.docpart(subject.uri), kb)) ||\n      (subject.termType === 'BlankNode' &&\n        kb.anyStatementMatching(subject) &&\n        kb.anyStatementMatching(subject).why &&\n        kb.anyStatementMatching(subject).why.uri &&\n        kb.updater.editable(kb.anyStatementMatching(subject).why.uri))\n      // check the document containing something about of the bnode @@ what about as object?\n      /*  ! && HCIoptions[\"bottom insert highlights\"].enabled  */\n    ) {\n      const holdingTr = dom.createElement('tr') // these are to minimize required changes\n      const holdingTd = dom.createElement('td') // in userinput.js\n      holdingTd.setAttribute('colspan', '2')\n      holdingTd.setAttribute('notSelectable', 'true')\n      const img = dom.createElement('img')\n      img.src = UI.icons.originalIconBase + 'tango/22-list-add-new.png'\n      img.addEventListener('click', function addNewTripleIconMouseDownListener (\n        e\n      ) {\n        outliner.UserInput.addNewPredicateObject(e)\n        e.stopPropagation()\n        e.preventDefault()\n      })\n      img.className = 'bottom-border-active'\n      // img.addEventListener('click', thisOutline.UserInput.addNewPredicateObject,false)\n      div\n        .appendChild(holdingTr)\n        .appendChild(holdingTd)\n        .appendChild(img)\n    }\n    return div\n  }\n}\n\n// ends\n"],"file":"defaultPane.js"}