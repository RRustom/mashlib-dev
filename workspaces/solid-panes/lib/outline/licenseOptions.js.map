{"version":3,"sources":["../../src/outline/licenseOptions.js"],"names":["licenseURI","names","UI","require","kb","store","module","exports","licenseOptions","options","references","checkedLicenses","openCheckBoxWindow","display","window","open","message","lics","kk","length","document","write","close","i","checkboxes","elements","selectAll","checked","deselectAll","submit","checkLicence","checkLicense","statement","licenses","each","why","sym","log","info","j","uri"],"mappings":";;AAAA;AACA;AAEA;AACA;AAEA,IAAMA,UAAU,GAAG,CACjB,mDADiB,EAEjB,mDAFiB,EAGjB,gDAHiB,EAIjB,gDAJiB,EAKjB,gDALiB,EAMjB,6CANiB,CAAnB;AASA,IAAMC,KAAK,GAAG,CAAC,UAAD,EAAa,UAAb,EAAyB,OAAzB,EAAkC,OAAlC,EAA2C,OAA3C,EAAoD,IAApD,CAAd;;AAEA,IAAMC,EAAE,GAAGC,OAAO,CAAC,UAAD,CAAlB;;AACA,IAAMC,EAAE,GAAGF,EAAE,CAACG,KAAd;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,cAAT,GAA2B;AAC1C,OAAKC,OAAL,GAAe,EAAf;AACA,OAAKC,UAAL,GAAkB,EAAlB;AACA,OAAKC,eAAL,GAAuB,EAAvB;;AAEA,OAAKC,kBAAL,GAA0B,YAAY;AACpC,iBAAUC,OAAV,GAAoBC,MAAM,CAACC,IAAP,CAClB,GADkB,EAElB,QAFkB,EAGlB,+FAHkB,CAApB;AAKD,GAND;;AAOA,MAAIC,OAAO,GAAG,uDAAd;AACA,MAAMC,IAAI,GAAG,KAAKN,eAAlB;;AACA,OAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGD,IAAI,CAACE,MAA3B,EAAmCD,EAAE,EAArC,EAAyC;AACvCF,IAAAA,OAAO,IACL,qCACAE,EADA,GAEA,0CAFA,KAE6C;AAC5CD,IAAAA,IAAI,CAACC,EAAD,CAAJ,GAAW,SAAX,GAAuB,EAHxB,IAIA,SAJA,GAKAjB,KAAK,CAACiB,EAAD,CALL,GAMA,QAPF;AAQD;;AAEDF,EAAAA,OAAO,IACL,qEADF,CAzB0C,CA0B8B;;AACxEA,EAAAA,OAAO,IAAI,kEAAX,CA3B0C,CA2BoC;;AAC9EA,EAAAA,OAAO,IAAI,gBAAX;AAEA,OAAKH,OAAL,CAAaO,QAAb,CAAsBC,KAAtB,CAA4BL,OAA5B;AAEA,OAAKH,OAAL,CAAaO,QAAb,CAAsBE,KAAtB;AAEA,MAAIC,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAwB;AACtB,SAAKb,UAAL,CAAgBa,CAAhB,IAAqB,aAAUV,OAAV,CAAkBO,QAAlB,CAA2BI,UAA3B,CAAsCC,QAAtC,CAA+CF,CAA/C,CAArB;AACD;;AAED,OAAKG,SAAL,GAAiB,YAAY;AAC3B,QAAIH,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAwB;AACtB,WAAKV,OAAL,CAAaO,QAAb,CAAsBI,UAAtB,CAAiCC,QAAjC,CAA0CF,CAA1C,EAA6CI,OAA7C,GAAuD,IAAvD;AACA,WAAKjB,UAAL,CAAgBa,CAAhB,EAAmBI,OAAnB,GAA6B,IAA7B;AACA,WAAKhB,eAAL,CAAqBY,CAArB,IAA0B,IAA1B;AACD;AACF,GAPD;;AASA,OAAKK,WAAL,GAAmB,YAAY;AAC7B,QAAIL,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAwB;AACtB,WAAKV,OAAL,CAAaO,QAAb,CAAsBI,UAAtB,CAAiCC,QAAjC,CAA0CF,CAA1C,EAA6CI,OAA7C,GAAuD,KAAvD;AACA,WAAKjB,UAAL,CAAgBa,CAAhB,EAAmBI,OAAnB,GAA6B,KAA7B;AACA,WAAKhB,eAAL,CAAqBY,CAArB,IAA0B,KAA1B;AACD;AACF,GAPD;;AASA,OAAKM,MAAL,GAAc,YAAY;AACxB;AACA,SAAK,IAAIN,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,CAApB,EAAuBA,EAAC,EAAxB,EAA4B;AAC1B,WAAKZ,eAAL,CAAqBY,EAArB,IAA0B,CAAC,CAAC,KAAKb,UAAL,CAAgBa,EAAhB,EAAmBI,OAA/C;AACD;AACF,GALD;;AAOA,OAAKG,YAAL,GAAoB,SAASC,YAAT,CAAuBC,SAAvB,EAAkC;AACpD,QAAMC,QAAQ,GAAG7B,EAAE,CAAC8B,IAAH,CACfF,SAAS,CAACG,GADK,EAEf/B,EAAE,CAACgC,GAAH,CAAO,uCAAP,CAFe,CAAjB;AAIAlC,IAAAA,EAAE,CAACmC,GAAH,CAAOC,IAAP,CAAY,cAAcN,SAAS,CAACG,GAAxB,GAA8B,IAA9B,GAAqCF,QAAjD;;AACA,SAAK,IAAIV,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGU,QAAQ,CAACd,MAA7B,EAAqCI,GAAC,EAAtC,EAA0C;AACxC,WAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,eAAL,CAAqBQ,MAAzC,EAAiDoB,CAAC,EAAlD,EAAsD;AACpD,YAAI,KAAK5B,eAAL,CAAqB4B,CAArB,KAA2BN,QAAQ,CAACV,GAAD,CAAR,CAAYiB,GAAZ,KAAoBxC,UAAU,CAACuC,CAAD,CAA7D,EAAkE;AAChE,iBAAO,IAAP,CADgE,CAEhE;AACA;AACD;AACF;AACF;;AACD,WAAO,KAAP;AACD,GAhBD;;AAiBA,SAAO,IAAP;AACD,CAlFD,C,CAoFA","sourcesContent":["// This was a student project to\n// allow the user to chose favoite CC licence terms and have them highlighted\n\n// tabulator.options becaome UI.licenseOptions\n// Possible future alternative directoons: Store licence preferences in a solid preferences file\n\nconst licenseURI = [\n  'http://creativecommons.org/licenses/by-nc-nd/3.0/',\n  'http://creativecommons.org/licenses/by-nc-sa/3.0/',\n  'http://creativecommons.org/licenses/by-nc/3.0/',\n  'http://creativecommons.org/licenses/by-nd/3.0/',\n  'http://creativecommons.org/licenses/by-sa/3.0/',\n  'http://creativecommons.org/licenses/by/3.0/'\n]\n\nconst names = ['BY-NC-ND', 'BY-NC-SA', 'BY-NC', 'BY-ND', 'BY-SA', 'BY']\n\nconst UI = require('solid-ui')\nconst kb = UI.store\n\nmodule.exports = function licenseOptions () {\n  this.options = {}\n  this.references = []\n  this.checkedLicenses = []\n\n  this.openCheckBoxWindow = function () {\n    this.this.display = window.open(\n      ' ',\n      'NewWin',\n      'menubar=0,location=no,status=no,directories=no,toolbar=no,scrollbars=yes,height=200,width=200'\n    )\n  }\n  let message = \"<font face='arial' size='2'><form name ='checkboxes'>\"\n  const lics = this.checkedLicenses\n  for (let kk = 0; kk < lics.length; kk++) {\n    message +=\n      \"<input type='checkbox' name = 'n\" +\n      kk +\n      \"' onClick = 'tabulator.options.submit()'\" + // @@ FIXME\n      (lics[kk] ? 'CHECKED' : '') +\n      ' />CC: ' +\n      names[kk] +\n      '<br />'\n  }\n\n  message +=\n    \"<br /> <a onclick='tabulator.options.selectAll()'>[Select All] </a>\" // @@ FIXME\n  message += \"<a onclick='tabulator.options.deselectAll()'> [Deselect All]</a>\" // @@ FIXME\n  message += '</form></font>'\n\n  this.display.document.write(message)\n\n  this.display.document.close()\n\n  let i\n  for (i = 0; i < 6; i++) {\n    this.references[i] = this.this.display.document.checkboxes.elements[i]\n  }\n\n  this.selectAll = function () {\n    let i\n    for (i = 0; i < 6; i++) {\n      this.display.document.checkboxes.elements[i].checked = true\n      this.references[i].checked = true\n      this.checkedLicenses[i] = true\n    }\n  }\n\n  this.deselectAll = function () {\n    let i\n    for (i = 0; i < 6; i++) {\n      this.display.document.checkboxes.elements[i].checked = false\n      this.references[i].checked = false\n      this.checkedLicenses[i] = false\n    }\n  }\n\n  this.submit = function () {\n    // alert('this.submit: checked=' + this.references[0].checked)\n    for (let i = 0; i < 6; i++) {\n      this.checkedLicenses[i] = !!this.references[i].checked\n    }\n  }\n\n  this.checkLicence = function checkLicense (statement) {\n    const licenses = kb.each(\n      statement.why,\n      kb.sym('http://creativecommons.org/ns#license')\n    )\n    UI.log.info('licenses:' + statement.why + ': ' + licenses)\n    for (let i = 0; i < licenses.length; i++) {\n      for (let j = 0; j < this.checkedLicenses.length; j++) {\n        if (this.checkedLicenses[j] && licenses[i].uri === licenseURI[j]) {\n          return true\n          // theClass += ' licOkay' // icon_expand\n          // break\n        }\n      }\n    }\n    return false\n  }\n  return this\n}\n\n// ends\n"],"file":"licenseOptions.js"}